(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{3917:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketplace/courses/manage",function(){return s(15)}])},2041:function(e,t,s){"use strict";s.d(t,{B:function(){return u},x:function(){return o}});var n,r=s(7568),a=s(6042),i=s(9534),c=s(655),l=s(8100),o=15,d=(n=(0,r.Z)(function(e){var t,s,n;return(0,c.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch(e)];case 1:return[4,t.sent().json()];case 2:return[2,null!==(n=t.sent().market_data.current_price.usd)&&void 0!==n?n:null]}})}),function(e){return n.apply(this,arguments)}),u=function(){var e,t=(0,l.ZP)("https://api.coingecko.com/api/v3/coins/ethereum?localization=false&tickers=false&community_data=false&developer_data=false&sparkline=false",d,{refreshInterval:1e4}),s=t.data,n=(0,i.Z)(t,["data"]),r=null!==(e=s&&(o/Number(s)).toFixed(6))&&void 0!==e?e:null;return{eth:(0,a.Z)({data:s,perItem:r},n)}}},8522:function(e,t,s){"use strict";s.d(t,{Y:function(){return x}});var n=s(5893),r=s(2445),a=s(2993),i=s(2041),c=s(5675),l=s.n(c);function o(){var e=(0,i.B)().eth;return(0,n.jsxs)("div",{className:"flex flex-col xs:flex-row text-center",children:[(0,n.jsxs)("div",{className:"p-6 border drop-shadow rounded-md mr-2",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,n.jsxs)("span",{className:"text-xl font-bold",children:["= ",e.data,"$"]})]}):(0,n.jsx)("div",{className:"w-full flex justify-center",children:(0,n.jsx)(a.aN,{size:"md"})})}),(0,n.jsx)("p",{className:"text-lg text-gray-500",children:"Current eth Price"})]}),(0,n.jsxs)("div",{className:"p-6 border drop-shadow rounded-md",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-xl font-bold",children:e.perItem}),(0,n.jsx)(l(),{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,n.jsxs)("span",{className:"text-xl font-bold",children:["= ",i.x,"$"]})]}):(0,n.jsx)("div",{className:"w-full flex justify-center",children:(0,n.jsx)(a.aN,{size:"md"})})}),(0,n.jsx)("p",{className:"text-lg text-gray-500",children:"Price per course"})]})]})}var d=s(4853);function u(){var e=(0,d.$)().requireInstall,t=(0,r.vL)(),s=t.account,i=t.network;return(0,n.jsx)("section",{className:"text-white bg-indigo-600 rounded-lg",children:(0,n.jsxs)("div",{className:"p-8",children:[(0,n.jsxs)("h1",{className:"text-base xs:text-xl break-words",children:["Hello, ",s.data]}),(0,n.jsx)("h2",{className:"subtitle mb-5 text-sm xs:text-base",children:"I hope you are having a great day!"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"sm:flex sm:justify-center lg:justify-start",children:(0,n.jsx)(a.zx,{className:"mr-2 text-sm xs:text-lg p-2",variant:"white",children:"Learn how to purchase"})}),(0,n.jsxs)("div",{children:[i.hasInitialResponse&&!i.isSupported&&(0,n.jsxs)("div",{className:"bg-red-400 p-4 rounded-lg",children:[(0,n.jsx)("div",{children:"Connected to wrong network"}),(0,n.jsxs)("div",{children:["Connect to: "," ",(0,n.jsx)("strong",{className:"text-2xl",children:i.target})]})]}),e&&(0,n.jsx)("div",{className:"bg-yellow-500 p-4 rounded-lg",children:"Cannot connect to network. Please install Metamask."}),i.data&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"Currently on "}),(0,n.jsx)("strong",{className:"text-2xl",children:i.data})]})]})]})]})})}var h=[{href:"/marketplace",value:"Buy"},{href:"/marketplace/courses/owned",value:"My Courses"},{href:"/marketplace/courses/manage",value:"Manage Courses",requireAdmin:!0}];function x(){var e=(0,r.mA)().account;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(u,{})}),(0,n.jsx)(o,{}),(0,n.jsx)("div",{className:"flex flex-row-reverse p-4 sm:px-6 lg:px-8",children:(0,n.jsx)(a.Oo,{isAdmin:e.isAdmin,items:h})})]})}},15:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(7568),r=s(4924),a=s(655),i=s(5893),c=s(2445),l=s(4853),o=s(2993),d=s(724),u=s(8522),h=s(413),x=s(7294),f=s(2881),m=function(e){var t=e.onVerify,s=(0,x.useState)(""),n=s[0],r=s[1];return(0,i.jsxs)("div",{className:"flex mr-2 relative rounded-md",children:[(0,i.jsx)("input",{onChange:function(e){return r(e.target.value)},value:n,type:"text",name:"account",id:"account",className:"w-96 focus:ring-indigo-500 shadow-md focus:border-indigo-500 block pl-7 p-4 sm:text-sm border-gray-300 rounded-md",placeholder:"0x2341ab..."}),(0,i.jsx)(o.zx,{onClick:function(){t(n)},children:"Verify"})]})};function p(){var e,t,s,p,j,v=(0,c.Aj)({redirectTo:"/marketplace"}).account,g=(0,c.J$)(v).managedCourses,N=(0,l.$)(),y=N.web3,b=N.contract,w=(0,x.useState)(null),_=w[0],k=w[1],C=(0,x.useState)({state:"all"}),S=C[0],A=C[1],Z=(0,x.useState)({}),F=Z[0],z=Z[1],I=function(e,t){var s=t.hash,n=t.proof;if(0!=e.length){var a=y.utils.sha3(e);y.utils.soliditySha3({type:"bytes32",value:a},{type:"bytes32",value:s})===n?z((0,r.Z)({},s,!0)):z((0,r.Z)({},s,!1))}},P=(t=(0,n.Z)(function(e,t){var s,n;return(0,a.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,b.methods[t](e).send({from:v.data})];case 1:return[2,s.sent()];case 2:return n=s.sent(),console.error(n.message),[3,3];case 3:return[2]}})}),function(e,s){return t.apply(this,arguments)}),E=(s=(0,n.Z)(function(e){return(0,a.__generator)(this,function(t){return(0,f.f)(P(e,"activateCourse")),[2]})}),function(e){return s.apply(this,arguments)}),T=(p=(0,n.Z)(function(e){return(0,a.__generator)(this,function(t){return(0,f.f)(P(e,"deactivateCourse")),[2]})}),function(e){return p.apply(this,arguments)}),D=(j=(0,n.Z)(function(e){var t,s,n;return(0,a.__generator)(this,function(r){switch(r.label){case 0:if(t=/[0-9A-Fa-f]{6}/g,!(e&&66===e.length&&t.test(e)))return[3,2];return[4,b.methods.getCourseByHash(e).call()];case 1:if("0x0000000000000000000000000000000000000000"!==(s=r.sent()).owner)return n=(0,h.h)(y)({hash:e},s),k(n),[2];r.label=2;case 2:return k(null),[2]}})}),function(e){return j.apply(this,arguments)}),H=function(e,t){return(0,i.jsxs)(d.p5,{course:e,isSearched:t,children:[(0,i.jsx)(m,{onVerify:function(t){return I(t,{hash:e.hash,proof:e.proof})}}),F[e.hash]&&(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(o.v0,{children:"Verified!"})}),!1===F[e.hash]&&(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(o.v0,{type:"danger",children:"Wrong Proof!"})}),"purchased"===e.state&&(0,i.jsxs)("div",{className:"mt-1",children:[(0,i.jsx)(o.zx,{onClick:function(){return E(e.hash)},variant:"green",children:"Activate"}),(0,i.jsx)(o.zx,{onClick:function(){return T(e.hash)},variant:"red",children:"Deactivate"})]})]},e.ownedCourseId)},$=null===(e=g.data)||void 0===e?void 0:e.filter(function(e){return"all"===S.state||e.state===S.state}).map(function(e){return H(e)});return v.isAdmin?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Y,{}),(0,i.jsx)(d.Gt,{onFilterSelect:function(e){return A({state:e})},onSearchSubmit:D}),(0,i.jsxs)("section",{className:"grid grid-cols-1",children:[_&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold p-5",children:"Search"}),H(_,!0)]}),(0,i.jsx)("h1",{className:"text-xl font-bold p-5",children:"All Courses"}),$,(null==$?void 0:$.length)===0&&(0,i.jsx)(o.v0,{type:"warning",children:"No courses to display"})]})]}):null}},2881:function(e,t,s){"use strict";s.d(t,{f:function(){return a}});var n=s(5893),r=s(2920),a=function(e){r.Am.promise(e,{pending:{render:function(){return(0,n.jsx)("div",{className:"p-6 py-2",children:(0,n.jsx)("p",{className:"mb-2",children:"Your transaction is being processed."})})},icon:!1},success:{render:function(e){var t=e.data;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-bold",children:["Tx: ",t.transactionHash.slice(0,20),"..."]}),(0,n.jsx)("p",{children:"Has been succesfuly processed."}),(0,n.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.transactionHash),target:"_blank",children:(0,n.jsx)("i",{className:"text-indigo-600 underline",children:"See Tx Details"})})]})},icon:"\uD83D\uDFE2"},error:{render:function(e){var t,s=e.data;return(0,n.jsx)("div",{children:null!==(t=s.message)&&void 0!==t?t:"Transaction has failed"})}}})}}},function(e){e.O(0,[256,724,774,888,179],function(){return e(e.s=3917)}),_N_E=e.O()}]);